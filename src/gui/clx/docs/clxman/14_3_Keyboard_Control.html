<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- This file is automatically generated, do not edit -->

<HTML LANG='en'>
  <HEAD>
    <TITLE>14.3 Keyboard Control</TITLE>
    <LINK HREF='mailto:gilbert@ma2s2.mathematik.uni-karlsruhe.de' REV='made'>
    <LINK HREF='14_4_Keyboard_Encodings.html' REL='Next'>
    <LINK HREF='14_2_Pointer_Control.html' REL='Previous'>
    <LINK HREF='index.html' REL='Start'>
    <LINK HREF='contents.html' REL='Contents'>
    <LINK HREF='the_index.html' REL='Index'>
    <LINK HREF='Glossary.html' REL='Glossary'>
    <LINK HREF='Front_matter.html' REL='Copyright'>
  <BODY BGCOLOR='#FFFFFF'>
    <A HREF='14_4_Keyboard_Encodings.html'>Next</A> <A
     HREF='14_2_Pointer_Control.html'>Prev</A> <A
     HREF='14_Control_Functions.html'>Up</A> 
    <HR>
    <H1><FONT FACE='helvetica' COLOR='#004000'>14.3 Keyboard Control</FONT>
    </H1>
     
    <P>
      The following paragraphs describe the CLX functions used to:
    <UL>
      <LI>
        Return or change keyboard controls
      <LI>
        Ring the keyboard bell
      <LI>
        Return or change the mapping of modifiers
      <LI>
        Return the current up/down state of all keys
    </UL>
     
    <DIV>
      <HR>
      <A NAME='bell'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>bell</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I> &#38;
            optional (<I>percent-from-normal</I> 0)
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
              <DT>
                <I>percent-from-normal</I>
              <DD>
                An integer (-100 through 100).
            </DL>
            <P>
              Rings the bell on the keyboard at a volume relative to the base 
              volume for the keyboard, if possible. Percent can range from 
              -100 to 100 inclusive, or else a Value error occurs. The 
              following is the bell volume when percent is non-negative:
            <P ALIGN='CENTER'>
              (- (+ <I>base percent</I>) (<B>quotient</B> (* <I>base percent
              </I>) 100))
            <P>
              and when percent is negative:
            <P ALIGN='CENTER'>
              (+ <I>base</I> (<B>quotient</B> (* <I>base percent</I>) 100))
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='change-keyboard-control'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>change-keyboard-control</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I> &#38;key 
            <B>:key-click-percent :bell-percent</B> <B>:bell-pitch 
            :bell-duration :led :led-mode :key :auto-repeat-mode</B>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
              <DT>
                <B>:key-click-percent</B>
              <DD>
                An integer (0 100).
              <DT>
                <B>:bell-percent</B>
              <DD>
                An integer (0 100).
              <DT>
                <B>:bell-pitch</B>
              <DD>
                A <A HREF='1_6_Data_Types.html#card16'><B>card16</B></A>.
              <DT>
                <B>:bell-duration</B>
              <DD>
                A <A HREF='1_6_Data_Types.html#card16'><B>card16</B></A>.
              <DT>
                <B>:led</B>
              <DD>
                A <A HREF='1_6_Data_Types.html#card8'><B>card8</B></A>.
              <DT>
                <B>:led-mode</B>
              <DD>
                Either <B>:on</B> or <B>:off</B>.
              <DT>
                <B>:key</B>
              <DD>
                A <A HREF='1_6_Data_Types.html#card8'><B>card8</B></A> 
                keycode.
              <DT>
                <B>:auto-repeat-mode</B>
              <DD>
                Either <B>:on</B>, <B>:off</B>, or <B>:default</B>.
            </DL>
            <P>
              Changes the various aspects of the keyboard. The keyword 
              arguments specify which controls to change.
            <P>
              The <B>:key-click-percent</B> keyword sets the volume for key 
              clicks, if possible. A value of 0 implies off, while a value of 
              100 implies loud. Setting <B>:key-click-percent</B> to <B>
              :default</B> restores the default value.
            <P>
              The <B>:bell-percent</B> sets the base volume for the bell 
              between 0 (off) and 100 (loud) if possible. Setting <B>
              :bell-percent</B> to <B>:default</B> restores the default value.
            <P>
              The <B>:bell-pitch</B> sets the pitch (specified in Hz) of the 
              bell, if possible. Setting the <B>:bell-pitch</B> to <B>:default
              </B> restores the default value. The <B>:bell-duration</B> sets 
              the duration ( specified in milliseconds) of the bell, if 
              possible. Setting <B>:bell-pitch</B> to <B>:default</B> 
              restores the default. Note that a bell generator connected with 
              the console but not directly on the keyboard is treated as if 
              it were part of the keyboard.
            <P>
              If both <B>:led-mode</B> and <B>:led</B> are specified, then 
              the state of that LED is changed, if possible. If only <B>
              :led-mode</B> is specified, the state of all LEDs are changed, 
              if possible. At most 32 LEDs are supported, numbered from one. 
              No standard interpretation of the LEDs are defined.
            <P>
              If both <B>:auto-repeat-mode</B> and <B>:key</B> are specified, 
              the auto-repeat mode of that key is changed, if possible. If 
              only <B>:auto-repeat-mode</B> is specified, the global 
              auto-repeat mode for the entire keyboard is changed, if 
              possible, without affecting the per-key settings. An error 
              occurs if <B>:key</B> is specified without <B>:auto-repeat-mode
              </B>.
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='keyboard-control'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>keyboard-control</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
            </DL>
            <P>
              Returns the current control values for the keyboard. For the 
              LEDs, the least significant bit of <I>led-mask</I> corresponds 
              to LED one, and each one bit in <I>led-mask</I> indicates an 
              LED that is lit. <I>auto-repeats</I> is a bit vector; each one 
              bit indicates that auto-repeat is enabled for the corresponding 
              key. The vector is represented as 32 bytes. Byte <I>n</I> (from 
              0) contains the bits for keys 8<I>n</I> to 8<I>n</I>+7, with 
              the least significant bit in the byte representing key 8<I>n</I>
              .
            <DL>
              <DT>
                <I>key-click-percent, bell-percent</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#card8'><B>card8</B></A>.
              <DT>
                <I>bell-pitch bell-duration</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#card16'><B>card16</B></A>.
              <DT>
                <I>led-mask</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#card32'><B>card32</B></A>.
              <DT>
                <I>global-auto-repeat</I>
              <DD>
                Either <B>:on</B> or <B>:off</B>.
              <DT>
                <I>auto-repeats</I>
              <DD>
                Type <B>bit-vector</B>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='modifier-mapping'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>modifier-mapping</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
            </DL>
            <P>
              Returns the set of keycodes used for each modifier on the <I>
              display</I> keyboard. Each return value is a list of the <A
               HREF='1_6_Data_Types.html#card8'><B>card8</B></A> keycodes 
              used for each modifier key. The order of keycodes within each 
              list is server-dependent.
            <DL>
              <DT>
                <I>shift-keycodes</I>, <I>lock-keycodes</I>, <I>
                control-keycodes</I>, <I>mod1-keycodes</I>, <I>mod2-keycodes
                </I>, <I>mod3-keycodes</I>, <I>mod4-keycodes</I>, <I>
                mod5-keycodes</I>
              <DD>
                Type <B>list</B> of <A HREF='1_6_Data_Types.html#card8'><B>
                card8</B></A>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='query-keymap'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>query-keymap</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
            </DL>
            <P>
              Returns a bit vector that describes the state of the keyboard. 
              Each one bit indicates that the corresponding key is currently 
              pressed. The vector is represented as 32 bytes. Byte <I>n</I> 
              (from 0) contains the bits for keys 8<I>n</I> to 8<I>n</I>+7, 
              with the least significant bit in the byte representing key 8<I>
              n</I>.
            <DL>
              <DT>
                <I>keymap</I>
              <DD>
                Type <B>bit-vector</B> 256.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='set-modifier-mapping'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>set-modifier-mapping</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I> &#38;key 
            <B>:shift :lock :control :mod1 :mod2</B> <B>:mod3 :mod4 :mod5</B>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
              <DT>
                <B>:shift</B>, <B>:lock</B>, <B>:control</B>, <B>:mod1</B>, <B
                >:mod2</B>, <B>:mod3</B>, <B>:mod4</B>, <B>:mod5</B>
              <DD>
                A sequence of <A HREF='1_6_Data_Types.html#card8'><B>card8</B>
                </A> keycodes for the given modifier.
            </DL>
            <P>
              Changes the set of keycodes mapped to the specified modifier 
              keys on the <I>display</I> keyboard. Each keyword argument 
              contains a sequence of new <A HREF='1_6_Data_Types.html#card8'>
              <B>card8</B></A> keycodes for a specific modifier. The return 
              value indicates whether the change was completed successfully.
            <P>
              A status of <B>:failed</B> is returned if hardware limitations 
              prevent the requested change. For example, multiple keycodes 
              per modifier may not be supported, up transitions on a given 
              keycode may not be supported, or autorepeat may be mandatory 
              for a given keycode. If <B>:failed</B> is returned, the 
              mappings for all modifiers remain unchanged.
            <P>
              A status of <B>:device-busy</B> is returned if a new keycode 
              given for a modifier was not previously mapped to that modifier 
              and is currently in the down state. In this case, the mappings 
              for all modifiers remain unchanged.
            <DL>
              <DT>
                <I>status</I>
              <DD>
                One of <B>:success</B>, <B>:failed</B>, or <B>:device-busy</B>
                .
            </DL>
      </TABLE>
    </DIV>
     
    <HR>
    <A HREF='14_4_Keyboard_Encodings.html'>Next</A> <A
     HREF='14_2_Pointer_Control.html'>Prev</A> <A
     HREF='14_Control_Functions.html'>Up</A> 
    <HR>
    <A HREF='Front_matter.html'>&#169; 1988, 1989 Texas Instruments 
    Incorporated</A>
    <BR>
    Conversion to HTML made by <A
     HREF='mailto:gilbert@ma2s2.mathematik.uni-karlsruhe.de' LANG='de'>
    Gilbert Baumann</A>.
    <BR>
    Last build: Tue Dec 16 23:30:42 1997
