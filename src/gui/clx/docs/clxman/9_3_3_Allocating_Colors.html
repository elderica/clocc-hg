<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- This file is automatically generated, do not edit -->

<HTML LANG='en'>
  <HEAD>
    <TITLE>9.3.3 Allocating Colors</TITLE>
    <LINK HREF='mailto:gilbert@ma2s2.mathematik.uni-karlsruhe.de' REV='made'>
    <LINK HREF='9_3_4_Finding_Colors.html' REL='Next'>
    <LINK HREF='9_3_2_Installing_Colormaps.html' REL='Previous'>
    <LINK HREF='index.html' REL='Start'>
    <LINK HREF='contents.html' REL='Contents'>
    <LINK HREF='the_index.html' REL='Index'>
    <LINK HREF='Glossary.html' REL='Glossary'>
    <LINK HREF='Front_matter.html' REL='Copyright'>
  <BODY BGCOLOR='#FFFFFF'>
    <A HREF='9_3_4_Finding_Colors.html'>Next</A> <A
     HREF='9_3_2_Installing_Colormaps.html'>Prev</A> <A
     HREF='9_3_Colormap_Functions.html'>Up</A> 
    <HR>
    <H1><FONT FACE='helvetica' COLOR='#004000'>9.3.3 Allocating Colors</FONT>
    </H1>
     
    <P>
      The following paragraphs describe the functions for allocating 
      read-only and read-write color cells, allocating color planes, and 
      freeing color cells.
    <DIV>
      <HR>
      <A NAME='alloc-color'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>alloc-color</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>colormap color</I>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>colormap</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#colormap'><B>colormap</B></A>.
              <DT>
                <I>color</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#color'><B>color</B></A> object 
                or a <A HREF='1_6_Data_Types.html#stringable'><B>stringable
                </B></A> containing a color name.
            </DL>
            <P>
              Returns a <I>pixel</I> for a read-only color cell in the <I>
              colormap</I>. The color in the allocated cell is the closest 
              approximation to the requested <I>color</I> possible for the 
              screen hardware. The other values returned give both the 
              approximate color stored in the cell and the exact color 
              requested.
            <P>
              The requested <I>color</I> can be either a <A
               HREF='1_6_Data_Types.html#color'><B>color</B></A> object or a 
              <A HREF='1_6_Data_Types.html#stringable'><B>stringable</B></A> 
              containing a color name. If a color name is given, a 
              corresponding color value is looked up (see <A
               HREF='9_3_4_Finding_Colors.html#lookup-color'><B>lookup-color
              </B></A>) and used. Color name strings must contain only ISO 
              Latin-1 characters; case is not significant.
            <DL>
              <DT>
                <I>pixel</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#pixel'><B>pixel</B></A>.
              <DT>
                <I>screen-color</I>, <I>exact-color</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#color'><B>color</B></A>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='alloc-color-cells'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>alloc-color-cells</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>colormap colors</I> 
            &#38;key (<B>:planes</B> 0) <B>:contiguous-p</B> (<B>:result-type 
            &#39;list</B>)
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>colormap</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#colormap'><B>colormap</B></A>.
              <DT>
                <I>colors</I>
              <DD>
                A positive number defining the length of the pixels sequence 
                returned.
              <DT>
                <B>:planes</B>
              <DD>
                A non-negative number defining the length of the masks 
                sequence returned.
              <DT>
                <B>:contiguous-p</B>
              <DD>
                If true, the masks form contiguous sets of bits.
              <DT>
                <B>:result-type</B>
              <DD>
                A subtype of <B>sequence</B> that indicates the type of 
                sequences returned.
            </DL>
            <P>
              Returns a <B>sequence</B> of <I>pixels</I> for read-write color 
              cells in the <I>colormap</I>. The allocated cells contain 
              undefined color values. The visual type class of the <A
               HREF='1_6_Data_Types.html#colormap'><B>colormap</B></A> must 
              be either <B>:gray-scale</B>, <B>:pseudo-color</B>, or <B>
              :direct-color</B>.
            <P>
              The <I>colors</I> argument and the <B>:planes</B> argument 
              define the number of pixels and the number of masks returned, 
              respectively. The number of colors must be positive, and the 
              number of planes must be non-negative. A total of (* <I>colors
              </I> (<B>expt</B> 2 <I>planes</I>)) color cells are allocated. 
              The pixel values for the allocated cells can be computed by 
              combining the returned pixels and masks.
            <P>
              The length of the returned masks sequence is equal to <B>:planes
              </B>. Each mask of the returned masks sequence defines a single 
              bitplane. None of the masks have any 1 bits in common. Thus, by 
              selectively combining masks with <B>logior</B>, (<B>expt</B> 2 
              <I>planes</I>) distinct combined plane masks can be computed.
            <P>
              The length of the returned <I>pixels</I> sequence is equal to <I
              >colors</I>. None of the pixels have any 1 bits in common with 
              each other or with any of the returned masks. By combining 
              pixels and plane masks with <B>logior</B>, (* <I>colors</I> (<B>
              expt</B> 2 <I>planes</I>)) distinct pixel values can be 
              produced.
            <P>
              If the <I>colormap</I> class is <B>:gray-scale</B> or <B>
              :pseudo-color</B>, each <I>mask</I> will have exactly one bit 
              set. If the <A HREF='1_6_Data_Types.html#colormap'><B>colormap
              </B></A> class is <B>:direct-color</B>, each <I>mask</I> will 
              have exactly three bits set. If <B>:contiguous-p</B> is true, 
              combining all masks with <B>logior</B> produces a plane mask 
              with either one set of contiguous bits (for <B>:gray-scale</B> 
              and <B>:pseudo-color</B>) or three sets of contiguous bits (for 
              <B>:direct-color</B>).
            <DL>
              <DT>
                <I>pixels, mask</I>
              <DD>
                Type <B>sequence</B> of <B>pixels</B>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='alloc-color-planes'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>alloc-color-planes</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>colormap colors</I> 
            &#38;key (<B>:reds</B> 0) (<B>:greens</B> 0) (<B>:blues</B> 0) <B>
            :contiguous-p</B> (<B>:result-type &#39;list</B>)
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>colormap</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#colormap'><B>colormap</B></A>.
              <DT>
                <I>colors</I>
              <DD>
                A positive number defining the length of the pixels sequence 
                returned.
              <DT>
                <B>:planes</B>
              <DD>
                A non-negative number defining the length of the masks 
                sequence returned.
              <DT>
                <B>:contiguous-p</B>
              <DD>
                If true, then the masks form contiguous sets of bits.
              <DT>
                <B>:result-type</B>
              <DD>
                A subtype of <B>sequence</B> that indicates the type of 
                sequences returned.
            </DL>
            <P>
              Returns a <B>sequence</B> of <I>pixels</I> for read-write color 
              cells in the <I>colormap</I>. The allocated cells contain 
              undefined color values. The visual type class of the <I>colormap
              </I> must be either <B>:gray-scale</B>, <B>:pseudo-color</B>, 
              or <B>:direct-color</B>.
            <P>
              The <I>colors</I> argument defines the number of pixels 
              returned. The <B>:reds</B>, <B>:greens</B>, and <B>:blues</B> 
              arguments define the number of bits set in the returned red, 
              green, and blue masks, respectively. The number of colors must 
              be positive, and the number of bits for each mask must be 
              non-negative. A total of (* <I>colors</I> (<B>expt</B> 2 (+ <I>
              reds greens</I> <I>blues</I>))) color cells are allocated. The 
              pixel values for the allocated cells can be computed by 
              combining the returned <I>pixels</I> and masks.
            <P>
              Each mask of the returned masks defines a pixel subfield for 
              the corresponding primary. None of the masks have any 1 bits in 
              common. By selectively combining subsets of the red, green, and 
              blue masks with <B>logior</B>, (<B>expt</B> 2 (+ <I>reds greens 
              blues</I>) distinct combined plane masks can be computed.
            <P>
              The length of the returned <I>pixels</I> <B>sequence</B> is 
              equal to <I>colors</I>. None of the pixels have any 1 bits in 
              common with each other or with any of the returned masks. By 
              combining pixels and plane masks with <B>logior</B>, (* <I>
              colors</I> (<B>expt</B> 2 (+ <I>reds greens blues</I>)) 
              distinct pixel values can be produced.
            <P>
              If <B>:contiguous-p</B> is true, each of returned masks 
              consists of a set of contiguous bits. If the <A
               HREF='1_6_Data_Types.html#colormap'><B>colormap</B></A> class 
              is <B>:direct-color</B>, each returned mask lies within the 
              pixel subfield for its primary.
            <DL>
              <DT>
                <I>pixels</I>
              <DD>
                Type <B>sequence</B> of <A HREF='1_6_Data_Types.html#pixel'><B
                >pixel</B></A>.
              <DT>
                <I>red-mask</I>, <I>green-mask</I>, <I>blue-mask</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#pixel'><B>pixel</B></A>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='free-colors'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>free-colors</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>colormap pixels</I> 
            &#38;optional (<I>plane-mask</I> 0)
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>colormap</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#colormap'><B>colormap</B></A>.
              <DT>
                <I>pixels</I>
              <DD>
                A <B>sequence</B> of pixel values.
              <DT>
                <I>plane-mask</I>
              <DD>
                A pixel value with no bits in common with any of the <I>pixels
                </I>.
            </DL>
            <P>
              Frees a set of allocated color cells from the <I>colormap</I>. 
              The pixel values for the freed cells are computed by combining 
              the given <I>pixels</I> sequence and <B>:plane-mask</B>. The 
              total number of cells freed is:
            <P ALIGN='CENTER'>
              (* (<B>length</B> <I>pixels</I>) (<B>expt</B> 2 (<B>logcount</B>
               <I>plane-mask</I>)))
            <P>
              The <B>:plane-mask</B> must not have any bits in common with 
              any of the given <I>pixels</I>. The pixel values for the freed 
              cells are produced by using <B>logior</B> to combine each of 
              the given pixels with all subsets of the <B>:plane-mask</B>.
            <P>
              Note that freeing an individual pixel allocated by <A
               HREF='9_3_3_Allocating_Colors.html#alloc-color-planes'><B>
              alloc-color-planes</B></A> may not allow it to be reused until 
              all related pixels computed from the same plane mask are also 
              freed.
            <P>
              A single error is generated if any computed pixel is invalid or 
              if its color cell is not allocated by the client. Even if an 
              error is generated, all valid pixel values are freed.
      </TABLE>
    </DIV>
     
    <HR>
    <A HREF='9_3_4_Finding_Colors.html'>Next</A> <A
     HREF='9_3_2_Installing_Colormaps.html'>Prev</A> <A
     HREF='9_3_Colormap_Functions.html'>Up</A> 
    <HR>
    <A HREF='Front_matter.html'>&#169; 1988, 1989 Texas Instruments 
    Incorporated</A>
    <BR>
    Conversion to HTML made by <A
     HREF='mailto:gilbert@ma2s2.mathematik.uni-karlsruhe.de' LANG='de'>
    Gilbert Baumann</A>.
    <BR>
    Last build: Tue Dec 16 23:30:42 1997
