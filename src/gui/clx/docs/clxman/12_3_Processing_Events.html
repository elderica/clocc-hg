<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- This file is automatically generated, do not edit -->

<HTML LANG='en'>
  <HEAD>
    <TITLE>12.3 Processing Events</TITLE>
    <LINK HREF='mailto:gilbert@ma2s2.mathematik.uni-karlsruhe.de' REV='made'>
    <LINK HREF='12_4_Managing_the_Event_Queue.html' REL='Next'>
    <LINK HREF='12_2_Selecting_Events.html' REL='Previous'>
    <LINK HREF='index.html' REL='Start'>
    <LINK HREF='contents.html' REL='Contents'>
    <LINK HREF='the_index.html' REL='Index'>
    <LINK HREF='Glossary.html' REL='Glossary'>
    <LINK HREF='Front_matter.html' REL='Copyright'>
  <BODY BGCOLOR='#FFFFFF'>
    <A HREF='12_4_Managing_the_Event_Queue.html'>Next</A> <A
     HREF='12_2_Selecting_Events.html'>Prev</A> <A
     HREF='12_Events_and_Input.html'>Up</A> 
    <HR>
    <H1><FONT FACE='helvetica' COLOR='#004000'>12.3 Processing Events</FONT>
    </H1>
     
    <P>
      Events received by a CLX client are stored in an <I>event queue</I> 
      until they are read and processed. Events are processed by <I>handler 
      functions</I>.
    <DIV>
      <HR>
      <A NAME='handler-function'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>handler-function</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'>&#38;rest <I>event-slots
            </I> &#38;key <B>:display :event-key :send-event-p</B> &#38;
            allow-other-keys
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <B>:display</B>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A> 
                for the connection that returned the event.
              <DT>
                <B>:event-key</B>
              <DD>
                An <A HREF='1_6_Data_Types.html#event-key'><B>event-key</B>
                </A> keyword specifying the event type.
              <DT>
                <B>:send-event-p</B>
              <DD>
                If true, the event was sent from another application using 
                the <A HREF='12_5_Sending_Events.html#send-event'><B>
                send-event</B></A> function.
            </DL>
            <P>
              The arguments to a handler function are keyword-value pairs 
              that describe the contents of an event. The actual <I>
              event-slots</I> passed depend on the event type, except that <B>
              :display</B>, <B>:event-key</B>, and <B>:send-event-p</B> are 
              given for all event types. The keyword symbols used for each 
              event type are event slot names defined by the <A
               HREF='12_12_8_Declaring_Event_Types.html#declare-event'><B>
              declare-event</B></A> macro and are described in paragraph 
              12.12.8, Declaring Event Types.
            <P>
              If a handler returns non-<B>nil</B>, the event is considered <I>
              processed</I> and can be removed from the event queue. 
              Otherwise, if a handler function returns <B>nil</B>, the event 
              can remain in the event queue for later processing.
            <DL>
              <DT>
                <I>handled-p</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#boolean'><B>boolean</B></A>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='process-event'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>process-event</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I> &#38;key 
            <B>:handler :timeout :peek-p :discard-p</B> <B>(:force-output-p t)
            </B>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
              <DT>
                <B>:handler</B>
              <DD>
                A handler function or a sequence of handler functions.
              <DT>
                <B>:timeout</B>
              <DD>
                Specifies the timeout delay in seconds.
              <DT>
                <B>:peek-p</B>
              <DD>
                If <B>nil</B>, events are removed from the event queue after 
                processing.
              <DT>
                <B>:discard-p</B>
              <DD>
                If true, unprocessed events are discarded.
              <DT>
                <B>:force-output-p</B>
              <DD>
                If true, buffered output requests are sent.
            </DL>
            <P>
              Invokes <B>:handler</B> on each queued event until <B>:handler
              </B> returns non-<B>nil</B>. Then, the non-<B>nil :handler</B> 
              value is returned by <A
               HREF='12_3_Processing_Events.html#process-event'><B>
              process-event</B></A>. If <B>:handler</B> returns <B>nil</B> 
              for each event in the event queue, <A
               HREF='12_3_Processing_Events.html#process-event'><B>
              process-event</B></A> waits for another event to arrive. If 
              timeout is non-<B>nil</B> and no event arrives within the 
              specified timeout interval (given in seconds), <A
               HREF='12_3_Processing_Events.html#process-event'><B>
              process-event</B></A> returns <B>nil</B>; if timeout is <B>nil
              </B>, <A HREF='12_3_Processing_Events.html#process-event'><B>
              process-event</B></A> will not return until <B>:handler</B> 
              returns non-<B>nil</B>. <A
               HREF='12_3_Processing_Events.html#process-event'><B>
              process-event</B></A> may wait only once on network data, and 
              therefore timeout prematurely.
            <P>
              If <B>:force-output-p</B> is true, <A
               HREF='12_3_Processing_Events.html#process-event'><B>
              process-event</B></A> first invokes <A
               HREF='2_4_Managing_the_Output_Buffer.html#display-force-output'
              ><B>display-force-output</B></A> to send any buffered requests. 
              If <B>:peek-p</B> is true, a processed event is not removed 
              from the queue. If <B>:discard-p</B> is true, unprocessed 
              events are removed from the queue; otherwise, unprocessed 
              events are left in place.
            <P>
              If <B>:handler</B> is a sequence, it is expected to contain 
              handler functions for each event type. The sequence index of 
              the handler function for a particular event type is given by ( 
              <B>position event-key *event-key-vector*</B>).
            <DL>
              <DT>
                <I>handled-p</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#boolean'><B>boolean</B></A>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='event-case'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>event-case</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I> &#38;key 
            <B>:timeout :peek-p :discard-p (:force-output-p t)</B> &#38;body 
            <I>clauses</I>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Macro
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
              <DT>
                <B>:handler</B>
              <DD>
                A handler function or a sequence of handler functions.
              <DT>
                <B>:timeout</B>
              <DD>
                Specifies the timeout delay, in seconds.
              <DT>
                <B>:peek-p</B>
              <DD>
                If <B>nil</B>, events are removed from the event queue after 
                processing.
              <DT>
                <B>:discard-p</B>
              <DD>
                If true, unprocessed events are discarded.
              <DT>
                <B>:force-output-p</B>
              <DD>
                If true, buffered output requests are sent.
              <DT>
                <I>clauses</I>
              <DD>
                Code to process specified event types.
            </DL>
            <P>
              Executes the matching clause for each queued event until a 
              clause returns non-<B>nil</B>. The non-<B>nil</B> clause value 
              is then returned. Each of the clauses is a list of the form (<I>
              event-match</I> [<I>event-slots</I>] &#38;rest <I>forms</I>), 
              where:
            <UL>
              <LI>
                <I>event-match</I> -- Either an <A
                 HREF='1_6_Data_Types.html#event-key'><B>event-key</B></A>, a 
                list of <B>event-keys</B>, otherwise, or <B>t</B>. It is an 
                error for the same key to appear in more than one clause.
              <LI>
                <I>event-slots</I> -- If given, a list of (non-keyword) event 
                slot symbols defined for the specified event type(s). See 
                paragraph 12.12.8, Declaring Event Types.
              <LI>
                <I>forms</I> -- A list of forms that process the specified 
                event type(s). The value of the last form is the value 
                returned by the clause.
            </UL>
             
            <P>
              A clause matches an event if the <A
               HREF='1_6_Data_Types.html#event-key'><B>event-key</B></A> is 
              equal to or a member of the <I>event-match</I>, or if the <I>
              event-match</I> is <B>t</B> or <B>otherwise</B>. If no <B>t</B> 
              or <B>otherwise</B> clause appears, it is equivalent to having 
              a final clause that returns <B>nil</B>. If <I>event-slots</I> 
              is given, these symbols are bound to the value of the 
              corresponding event slot in the clause forms. Each element of <I
              >event-slots</I> can also be a list of the form (<I>
              event-slot-keyword variable</I>), in which case the <I>variable
              </I> symbol is bound to the value of the event slot specified 
              by the <I>event-slot-keyword</I>.
            <P>
              If every clause returns <B>nil</B> for each event in the event 
              queue, <A HREF='12_3_Processing_Events.html#event-case'><B>
              event-case</B></A> waits for another event to arrive. If <B>
              :timeout</B> is non-<B>nil</B> and no event arrives within the 
              specified timeout interval (given in seconds), <A
               HREF='12_3_Processing_Events.html#event-case'><B>event-case</B>
              </A> returns <B>nil</B>; if <B>:timeout</B> is <B>nil</B>, <A
               HREF='12_3_Processing_Events.html#event-case'><B>event-case</B>
              </A> will not return until a clause returns non-<B>nil</B>. <A
               HREF='12_3_Processing_Events.html#event-case'><B>event-case</B>
              </A> may wait only once on network data and therefore timeout 
              prematurely.
            <P>
              If <B>:force-output-p</B> is true, <A
               HREF='12_3_Processing_Events.html#event-case'><B>event-case</B>
              </A> first invokes <A
               HREF='2_4_Managing_the_Output_Buffer.html#display-force-output'
              ><B>display-force-output</B></A> to send any buffered requests. 
              If <B>:peek-p</B> is true, a processed event is not removed 
              from the queue. If <B>:discard-p</B> is true, unprocessed 
              events are removed from the queue; otherwise, unprocessed 
              events are left in place.
            <DL>
              <DT>
                <I>handled-p</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#boolean'><B>boolean</B></A>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='event-cond'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>event-cond</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I> &#38;key 
            <B>:timeout :peek-p :discard-p (:force-output-p t)</B> &#38;body 
            <I>clauses</I>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Macro
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
              <DT>
                <B>:handler</B>
              <DD>
                A handler function or a sequence of handler functions.
              <DT>
                <B>:timeout</B>
              <DD>
                Specifies the timeout delay in seconds.
              <DT>
                <B>:peek-p</B>
              <DD>
                If <B>nil</B>, events are removed from the event queue after 
                processing.
              <DT>
                <B>:discard-p</B>
              <DD>
                If true, unprocessed events are discarded.
              <DT>
                <B>:force-output-p</B>
              <DD>
                If true, buffered output requests are sent.
              <DT>
                <I>clauses</I>
              <DD>
                Code to process specified event types.
            </DL>
            <P>
              Similar to <A HREF='12_3_Processing_Events.html#event-case'><B>
              event-case</B></A> except that each of the clauses is a list of 
              the form (<I>event-match</I> [<I>event-slots</I>] <I>test-form
              </I> &#38;rest <I>forms</I>). Executes the <I>test-form</I> of 
              the clause that matches each queued event until a <I>test-form
              </I> returns non-<B>nil</B>. The body <I>forms</I> of the 
              clause are then executed. The values returned by the last 
              clause body form are then returned by <A
               HREF='12_3_Processing_Events.html#event-cond'><B>event-cond</B>
              </A>.
            <P>
              When a <I>test-form</I> returns true and <B>:peek-p</B> is <B>
              nil</B>, or when a <I>test-form</I> returns <B>nil</B> and <B>
              :discard-p</B> is true, the matching event is removed from the 
              event queue before the body <I>forms</I> are executed.
            <DL>
              <DT>
                <I>handled-p</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#boolean'><B>boolean</B></A>.
            </DL>
      </TABLE>
    </DIV>
     
    <HR>
    <A HREF='12_4_Managing_the_Event_Queue.html'>Next</A> <A
     HREF='12_2_Selecting_Events.html'>Prev</A> <A
     HREF='12_Events_and_Input.html'>Up</A> 
    <HR>
    <A HREF='Front_matter.html'>&#169; 1988, 1989 Texas Instruments 
    Incorporated</A>
    <BR>
    Conversion to HTML made by <A
     HREF='mailto:gilbert@ma2s2.mathematik.uni-karlsruhe.de' LANG='de'>
    Gilbert Baumann</A>.
    <BR>
    Last build: Tue Dec 16 23:30:42 1997
