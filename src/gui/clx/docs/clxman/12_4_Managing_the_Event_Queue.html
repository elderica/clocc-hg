<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- This file is automatically generated, do not edit -->

<HTML LANG='en'>
  <HEAD>
    <TITLE>12.4 Managing the Event Queue</TITLE>
    <LINK HREF='mailto:gilbert@ma2s2.mathematik.uni-karlsruhe.de' REV='made'>
    <LINK HREF='12_5_Sending_Events.html' REL='Next'>
    <LINK HREF='12_3_Processing_Events.html' REL='Previous'>
    <LINK HREF='index.html' REL='Start'>
    <LINK HREF='contents.html' REL='Contents'>
    <LINK HREF='the_index.html' REL='Index'>
    <LINK HREF='Glossary.html' REL='Glossary'>
    <LINK HREF='Front_matter.html' REL='Copyright'>
  <BODY BGCOLOR='#FFFFFF'>
    <A HREF='12_5_Sending_Events.html'>Next</A> <A
     HREF='12_3_Processing_Events.html'>Prev</A> <A
     HREF='12_Events_and_Input.html'>Up</A> 
    <HR>
    <H1><FONT FACE='helvetica' COLOR='#004000'>12.4 Managing the Event Queue
      </FONT></H1>
     
    <P>
      The following paragraphs describe CLX functions and macros used to:
    <UL>
      <LI>
        Put a new event on the event queue
      <LI>
        Discard the current event
      <LI>
        Return the current length of the event queue
      <LI>
        Gain exclusive access to the event queue for a client process
    </UL>
     
    <DIV>
      <HR>
      <A NAME='queue-event'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>queue-event</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display event-key</I> 
            &#38;rest <I>event-slots</I> &#38;key <B>:append-p</B> &#38;
            allow-other-keys
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
              <DT>
                <I>event-key</I>
              <DD>
                Specifies the type of event placed in the queue.
              <DT>
                <I>event-slots</I>
              <DD>
                Keyword-value pairs that describe the contents of an event.
              <DT>
                <B>:append-p</B>
              <DD>
                If true, the event is placed at the tail of the queue; 
                otherwise, the event is placed at the head of the queue.
            </DL>
            <P>
              Places an event of the type given by <I>event-key</I> into the 
              event queue. When <B>:append-p</B> is true, the event is placed 
              at the tail of the queue; otherwise, the event is placed at the 
              head of the queue. The actual <I>event-slots</I> passed depend 
              on the event type. The keyword symbols used for each event type 
              are event slot names defined by the <A
               HREF='12_12_8_Declaring_Event_Types.html#declare-event'><B>
              declare-event</B></A> macro and are described in paragraph 
              12.12.8, Declaring Event Types.
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='discard-current-event'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>discard-current-event</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
            </DL>
            <P>
              Discards the current event for the <I>display</I>. Returns <B>
              nil</B> when the event queue is empty; otherwise, returns <B>t
              </B>. This function provides extra flexibility for discarding 
              events, but it should be used carefully; use <A
               HREF='12_3_Processing_Events.html#event-cond'><B>event-cond</B>
              </A> instead, if possible. Typically, <A
               HREF='12_4_Managing_the_Event_Queue.html#discard-current-event'
              ><B>discard-current-event</B></A> is called inside a handler 
              function or a clause of an <A
               HREF='12_3_Processing_Events.html#event-case'><B>event-case</B>
              </A> form and is followed by another call to <A
               HREF='12_3_Processing_Events.html#process-event'><B>
              process-event</B></A>, <A
               HREF='12_3_Processing_Events.html#event-case'><B>event-case</B>
              </A>, or <A HREF='12_3_Processing_Events.html#event-cond'><B>
              event-cond</B></A>.
            <DL>
              <DT>
                <I>discarded-p</I>
              <DD>
                Type <A HREF='1_6_Data_Types.html#boolean'><B>boolean</B></A>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='event-listen'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>event-listen</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I> &#38;
            optional (<B>timeout</B> 0)
          <TD VALIGN='TOP' ALIGN='RIGHT'>Function
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
              <DT>
                <I>timeout</I>
              <DD>
                The number of seconds to wait for events.
            </DL>
            <P>
              Returns the number of events queued locally. If the event queue 
              is empty, <A
               HREF='12_4_Managing_the_Event_Queue.html#event-listen'><B>
              event-listen</B></A> waits for an event to arrive. If timeout 
              is non-<B>nil</B> and no event arrives within the specified 
              timeout interval (given in seconds), <A
               HREF='12_4_Managing_the_Event_Queue.html#event-listen'><B>
              event-listen</B></A> returns <B>nil</B>; if timeout is <B>nil
              </B>, <A HREF='12_4_Managing_the_Event_Queue.html#event-listen'>
              <B>event-listen</B></A> will not return until an event arrives.
            <DL>
              <DT>
                <I>event-count</I>
              <DD>
                Type <B>(or null integer)</B>.
            </DL>
      </TABLE>
    </DIV>
     
    <DIV>
      <HR>
      <A NAME='with-event-queue'></A>
      <TABLE>
        <TR>
          <TD VALIGN='TOP' ALIGN='LEFT'><B>with-event-queue</B>
          <TD WIDTH='100%' VALIGN='TOP' ALIGN='LEFT'><I>display</I> &#38;body 
            <I>body</I>
          <TD VALIGN='TOP' ALIGN='RIGHT'>Macro
      </TABLE>
      <TABLE>
        <TR>
          <TD>&#160;&#160;&#160;&#160;&#160;
          <TD>
            <DL>
              <DT>
                <I>display</I>
              <DD>
                A <A HREF='1_6_Data_Types.html#display'><B>display</B></A>.
              <DT>
                <I>body</I>
              <DD>
                Forms to execute.
            </DL>
            <P>
              Executes the <I>body</I> in a critical region in which the 
              executing client process has exclusive access to the event 
              queue.
      </TABLE>
    </DIV>
     
    <HR>
    <A HREF='12_5_Sending_Events.html'>Next</A> <A
     HREF='12_3_Processing_Events.html'>Prev</A> <A
     HREF='12_Events_and_Input.html'>Up</A> 
    <HR>
    <A HREF='Front_matter.html'>&#169; 1988, 1989 Texas Instruments 
    Incorporated</A>
    <BR>
    Conversion to HTML made by <A
     HREF='mailto:gilbert@ma2s2.mathematik.uni-karlsruhe.de' LANG='de'>
    Gilbert Baumann</A>.
    <BR>
    Last build: Tue Dec 16 23:30:42 1997
