;;; -*- Lisp -*-
;;;
;;; CLLIB - a library of useful utilities
;;;
;;; $Id$
;;; $Source$
;;;
;;; when adding a file to CLLIB, one has to modify the following:
;;; 1. cllib.system (defsystem)
;;; 2. Makefile ($(SOURCES))
;;; 3. cllib.html (file list)

(let (tbc)                      ; To Be Compiled

(mk:defsystem cllib
    :source-pathname (translate-logical-pathname "clocc:src;cllib;")
    ;; :package :cllib
    :source-extension "lisp"
    :components
    ((:file "animals" :depends-on
            ("base" "string" "miscprint" "fileio" "closio" "symb"))
     (:file "autoload" :depends-on ("base" "fileio"))
     (:file "base")
     (:file "card" :depends-on
            ("base" "withtype" "closio" "tilsla" "string" "date" "url"))
     (:file "check" :depends-on ("base" "log" "math"))
     (:file "clhs" :depends-on
            ("base" "withtype" "string" "fileio" "log" "html"))
     (:file "closio" :depends-on ("base"))
     (:file "cvs" :depends-on ("base" "string" "fileio" "date" "miscprint"))
     (:file "date" :depends-on
            ("base" "simple" "string" "sorted" "log" "withtype" #+cmu"closio"))
     (:file "datedl" :depends-on
            ("base" "withtype" "date" "laser" "math" "symb"))
     (:file "doall" :depends-on ("base"))
     (:file "elisp" :depends-on ("base" "closio" "list"))
     (:file "fileio" :depends-on ("base" "withtype" "symb" "log"))
     (:file "fin" :depends-on ("base" "math" "tilsla" "withtype"))
     (:file "geo" :depends-on
            ("base" "withtype" "symb" "fileio" "html" "tilsla" "url"))
     (:file "getopt" :depends-on ("base" "symb"))
     (:file "gnuplot" :depends-on ("base" "date" "datedl" "math" "stat"))
     (:file "gq" :depends-on ("base""withtype" "html" "url" "gnuplot"))
     (:file "h2lisp" :depends-on ("base" "withtype" "html"))
     (:file "html" :depends-on ("base" "xml" "url"))
     (:file "htmlgen" :depends-on ("base"))
     (:file "inspect" :depends-on
            ("base" "simple" "closio" "url" "string" "htmlgen"))
     (:file "iter" :depends-on ("base" "simple" "withtype" "log" "math"))
     (:file "laser" :depends-on ("base" "log"))
     (:file "list" :depends-on ("base" "simple"))
     (:file "log" :depends-on ("base" "withtype" "tilsla"))
     (:file "math" :depends-on ("base" "withtype" "fileio" "log" "list"))
     (:file "matrix" :depends-on ("base" "withtype"))
     (:file "miscprint" :depends-on ("base" "simple"))
     #+clisp (:file "octave" :depends-on ("base"))
     (:file "prompt" :depends-on ("base"))
     (:file "rpm" :depends-on ("base" "url"))
     (:file "server" :depends-on ("base" "log" "prompt"))
     (:file "simple" :depends-on ("base"))
     (:file "sorted" :depends-on ("base" "tilsla" "math"))
     (:file "stat" :depends-on ("base" "math" "withtype" "matrix"))
     (:file "string" :depends-on ("base" "withtype"))
     (:file "symb" :depends-on ("base"))
     (:file "tests" :depends-on ("base" "string" "date" "rpm" "url" "elisp"))
     (:file "tilsla" :depends-on ("base" "withtype"))
     (:file "url" :depends-on ("base" "withtype" "symb" "string" "fileio"
                               "log" "simple" "tilsla" "date"))
     (:file "withtype" :depends-on ("base"))
     (:file "xml" :depends-on ("base" "string" "withtype" "closio" "log")))
    :initially-do
    (progn (mk:system-source-size :cllib :all)
           (setq tbc (mk:system-source-size
                      :cllib :new-source-and-dependents)))
    :finally-do
    (unless (zerop tbc)
      (in-package :cllib)
      (funcall (intern "TEST-ALL" :cllib))
      (funcall (intern "AUTOLOAD-GENERATE" :cllib)
               (mk:files-in-system :cllib) "auto.lisp")
      (compile-file "auto.lisp")))

)                               ; tbc
